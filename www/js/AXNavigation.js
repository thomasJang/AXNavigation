var AXNavigation=function(){function a(a,b){var c=a;if(c)for(;function(){var a=!0;return b&&(a=b(c)),!a}();){if(!c.parentNode){c=!1;break}c=c.parentNode}return c}function b(){(function(){this.config={animateTime:300,addon_back:{html:'<i class="icon-dp-back"></i>'}},this.isCordova=window.cordova?!0:!1}).apply(this,arguments);var b=this,d=this.config;this.position=0,this.content_stack=[],this.animating=!1,this.aside_opend=!1,this.set_config=function(a,b){return $.extend(this.config,a,!0),this},this.open_header=function(e){var f,g=[];if(g.push('<div class="bar-wrapper" id="axn-navigation-'+e.objectName+'">'),e.header.title&&g.push('<div class="bar-title">'+e.header.title+"</div>"),this.content_stack.length>1&&g.push('<div class="bar-addon left" data-header-btn="back">'+d.addon_back.html+'<span class="label">'+this.content_stack[this.content_stack.length-2].form.header.title+"</span></div>"),e.header.addon)for(var h,i=0,j=e.header.addon.length;j>i;i++)h=e.header.addon[i],g.push('<div class="bar-addon '+h.type+'" data-header-btn="'+i+'">'+h.html+"</div>");g.push('<div style="clear: both;"></div>'),g.push("</div>"),this.content_stack.length<2?(d.navigation_bar.html(g.join("")),f=d.navigation_bar.find("#axn-navigation-"+e.objectName)):(this.content_stack[this.content_stack.length-2].header_jdom.removeClass("slide-in-right").addClass("slide-out-left"),d.navigation_bar.append(g.join("")),f=d.navigation_bar.find("#axn-navigation-"+e.objectName),f.addClass("slide-in-right"));var k=this.content_stack[this.content_stack.length-1];k.header_jdom=f,k.header_jdom.find("[data-header-btn]").bind(c,function(c){var f=a(c.target,function(a){return null!=a.getAttribute("data-header-btn")});if(f&&!b.aside_opend){var g=f.getAttribute("data-header-btn");if("back"==g){var h={form:e};d.addon_back.onclick?d.addon_back.onclick.call(h,h):b.close(e)}else if(e.header.addon[g].onclick){var h={form:e,item:e.header.addon[g]};e.header.addon[g].onclick.call(h,h)}return!1}})},this.open=function(a,b,c){if(this.animating)return this;if(this.aside_opend)return this;this.animating=!0;var e=this.position;"right"==b&&e++;var f,g='<div class="'+d.content_wrapper_class_name+'" id="axn-content-'+a.objectName+'" data-content-target="'+b+'" data-content-position="'+e+'"></div>';if("_main"==b){d.content_container.empty(),d.content_container.append(g),f=d.content_container.find("#axn-content-"+a.objectName);for(var h=0,i=this.content_stack.length;i>h;h++)this.content_stack[h].jdom.remove(),window[this.content_stack[h].form.objectName]&&delete window[this.content_stack[h].form.objectName];this.content_stack=[],this.content_stack.push({form:a,jdom:f}),a.header&&this.open_header(a),$.get(a.url,function(b){f.append(b),window[a.objectName]&&window[a.objectName][a.startFunction]()})}else"_right"==b&&(d.content_container.append(g),f=d.content_container.find("#axn-content-"+a.objectName),this.content_stack.push({form:a,jdom:f}),this.content_stack[this.content_stack.length-2].jdom.addClass("slide-out-left"),this.content_stack[this.content_stack.length-1].jdom.addClass("slide-in-right"),this.position=e,a.header&&this.open_header(a),$.get(a.url,function(b){f.append(b),window[a.objectName]&&window[a.objectName][a.startFunction]()}));setTimeout(function(){this.animating=!1,"_right"==b&&(this.content_stack[this.content_stack.length-2].jdom.hide(),this.content_stack[this.content_stack.length-1].jdom.removeClass("slide-in-right"))}.bind(this),d.animateTime)},this.close=function(a){return this.animating?this:(this.animating=!0,this.content_stack[this.content_stack.length-2].jdom.show().removeClass("slide-out-left").addClass("slide-in-left"),this.content_stack[this.content_stack.length-1].jdom.removeClass("slide-in-right").addClass("slide-out-right"),this.content_stack[this.content_stack.length-2].header_jdom.show().removeClass("slide-out-left").addClass("slide-in-left"),this.content_stack[this.content_stack.length-1].header_jdom.removeClass("slide-in-right").addClass("slide-out-right"),void setTimeout(function(){this.content_stack[this.content_stack.length-2].jdom.removeClass("slide-in-left"),this.content_stack[this.content_stack.length-1].jdom.remove(),this.content_stack[this.content_stack.length-2].header_jdom.removeClass("slide-in-left"),this.content_stack[this.content_stack.length-1].header_jdom.remove(),this.content_stack.pop(),window[a.objectName]&&delete window[a.objectName],this.animating=!1}.bind(this),d.animateTime))},this.scroll_top=function(a){if(this.animating)return this;b.animating=!0;var c=this.content_stack[this.content_stack.length-1].jdom;c.css({"-webkit-overflow-scrolling":"none",overflow:"hidden"}),c.stop().animate({scrollTop:a},d.animateTime,"swing",function(){b.animating=!1,c.css({"-webkit-overflow-scrolling":"touch",overflow:"auto"})})},this.open_aside=function(a){this.aside_opend=!0,this.app_mask=$('<div class="app-content-mask"></div>'),"aside_left"==a?(d.navigation_bar.addClass("open-aside-left"),d.content_container.addClass("open-aside-left"),$(document.body).append(this.app_mask),this.app_mask.addClass("open-aside-left"),this.app_mask.bind(c,function(a){return b.close_aside("aside_left"),a.preventDefault(),a.stopPropagation(),!1})):"aside_right"==a&&(d.navigation_bar.addClass("open-aside-right"),d.content_container.addClass("open-aside-right"),$(document.body).append(this.app_mask),this.app_mask.addClass("open-aside-right"),this.app_mask.bind(c,function(a){return b.close_aside("aside_right"),a.preventDefault(),a.stopPropagation(),!1}))},this.close_aside=function(a){d.navigation_bar.removeClass("open-aside-left").removeClass("open-aside-right"),d.content_container.removeClass("open-aside-left").removeClass("open-aside-right"),"aside_left"==a?(d.navigation_bar.addClass("close-aside-left"),d.content_container.addClass("close-aside-left"),this.app_mask.removeClass("open-aside-left").addClass("close-aside-left")):"aside_right"==a&&(d.navigation_bar.addClass("close-aside-right"),d.content_container.addClass("close-aside-right"),this.app_mask.removeClass("open-aside-right").addClass("close-aside-right")),setTimeout(function(){this.app_mask.remove(),d.navigation_bar.removeClass("close-aside-left").removeClass("close-aside-right"),d.content_container.removeClass("close-aside-left").removeClass("close-aside-right"),this.aside_opend=!1}.bind(this),d.animateTime)}}var c="ontouchstart"in window?"touchstart":"click";return b}();