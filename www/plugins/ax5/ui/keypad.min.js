!function(root,ax_super){var U=ax5.util,axd=ax5.dom,ax_class=function(){this.main=function(){ax_super&&ax_super.call(this),this.config={click_event_name:"ontouchstart"in document.documentElement?"touchstart":"click",theme:"default",keys:{label:"label",value:"value",width:"width",rowspan:"rowspan",colspan:"colspan",klass:"klass"}}}.apply(this,arguments),this.target=null;var cfg=this.config;this.init=function(){cfg.target&&cfg.board||U.error("aui_keypad_400","[ax5.ui.keypad] config.target, config.board is required"),this.target=ax5.dom(cfg.target),this.set_layout()},this.set_layout=function(){var keys=cfg.keys,po=[],col_width=cfg.board.col_width||"10px",col_height=cfg.board.col_height||"10px";po.push('<div class="ax5-ui-keypad '+cfg.theme+'">'),po.push('<table cellpadding="0" cellspacing="0">'),po.push("<tbody>"),po.push("<tr>");for(var item,i=0,ll=cfg.board.keys.length;ll>i;i++)item=cfg.board.keys[i],item.newline?po.push("</tr><tr>"):(po.push('<td rowspan="'+(item[keys.rowspan]||1)+'" colspan="'+(item[keys.colspan]||1)+'" style="'+function(css){return css=[],1==(item[keys.colspan]||1)&&css.push("width:"+(item[keys.width]?item[keys.width]:col_width)),css.join(";")}()+'">'),po.push('<div class="ax-btn-wraper" style="'+function(css){if(css=[],1==(item[keys.rowspan]||1))css.push("height:"+col_height);else{var unit=col_height.replace(/\d+/g,"")||"px";css.push("height:"+U.number(col_height)*item[keys.rowspan]+unit)}return css.join(";")}()+'">'),po.push('<button class="ax-btn '+(item[keys.klass]||"")+'" data-keypad-item-index="'+i+'">'+item[keys.label]+"</button>"),po.push("</div>"),po.push("</td>"));po.push("</tbody>"),po.push("</table>"),po.push("</div>"),this.target.html(po.join("")),this.target.find("[data-keypad-item-index]").on(cfg.click_event_name,function(e){this.onclick(e||window.event)}.bind(this))},this.onclick=function(e,target,index){target=axd.parent(e.target,function(target){return ax5.dom.attr(target,"data-keypad-item-index")?!0:void 0}),target&&(index=axd.attr(target,"data-keypad-item-index"),this.config.onclick&&this.config.onclick.call({keys:this.config.board.keys,item:this.config.board.keys[index],target:this.target.elements[0],item_target:target}))}};U.is_function(ax_super)&&(ax_class.prototype=new ax_super),root.keypad=ax_class,"function"==typeof define&&define.amd&&define("_ax5_ui_keypad",[],function(){return ax_class})}(ax5.ui,ax5.ui.root);