!function(root,ax_super){var U=ax5.util,axd=ax5.dom,ax_class=function(){this.main=function(){ax_super&&ax_super.call(this),this.config={keys:{value:"value",text:"text",shortcut:"shortcut",data:"data",menu:"menu"}}}.apply(this,arguments),this.target=null;var cfg=this.config;this.init=function(){cfg.target&&cfg.menu||U.error("aui_menu_400","[ax5.ui.menu] config.target, config.menu is required"),this.target=ax5.dom(cfg.target),this.print_list()},this.print_list=function(){var po=[],get_child_menu_html=function(_po_,_menu_,_depth_){_po_.push('<ul class="ax-item-group ax-item-group-depth-'+_depth_+'">');for(var i=0,l=_menu_.length;l>i;i++)_po_.push('<a class="ax-item" data-menu-item-index="'+i+'">'),_po_.push(_menu_[i][cfg.keys.text]),_po_.push("</a>"),_menu_[i][cfg.keys.menu]&&_menu_[i][cfg.keys.menu].length>0&&get_child_menu_html(_po_,_menu_[i][cfg.keys.menu],_depth_+1);_po_.push("</ul>")};get_child_menu_html(po,cfg[cfg.keys.menu],0),this.target.html(po.join("")),this.target.find("[data-menu-item-index]").on("click",function(e){this.onclick(e||window.event)}.bind(this))},this.onclick=function(e,target,index){target=axd.parent(e.target,function(target){return ax5.dom.attr(target,"data-menu-item-index")?!0:void 0}),target&&(index=axd.attr(target,"data-menu-item-index"),this.config.onclick&&this.config.onclick.call({menu:this.config[cfg.keys.menu],item:this.config[cfg.keys.menu][index],target:this.target.elements[0],item_target:target}))}};U.is_function(ax_super)&&(ax_class.prototype=new ax_super),root.menu=ax_class,"function"==typeof define&&define.amd&&define("_ax5_ui_menu",[],function(){return ax_class})}(ax5.ui,ax5.ui.root);