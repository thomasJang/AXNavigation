!function(root,ax_super){var U=ax5.util,ax_class=(ax5.dom,function(){this.main=function(){ax_super&&ax_super.call(this),this.config={click_event_name:"ontouchstart"in document.documentElement?"touchstart":"click"}}.apply(this,arguments),this.queue={};this.config;this.start=function(opts){if(!opts.target||!opts.id)return void U.error("aui_progress_400","[ax5.ui.progress] target, id is required");var q,q_cfg,queue_id=opts.id;return this.queue[queue_id]={id:opts.id,config:opts},q=this.queue[queue_id],q_cfg=q.config,q_cfg.target=ax5.dom(q_cfg.target),q_cfg.target.html(this.get_frame(q.config.theme)),q.els={root:q_cfg.target.find('[data-progress-els="root"]'),bar:q_cfg.target.find('[data-progress-els="bar"]'),status:q_cfg.target.find('[data-progress-els="status"]')},this},this.set_progress=function(id,idx,status){var percent,q=this.queue[id],_idx=idx;q.status=status,q.progress_index=idx,percent=U.number(_idx/q.config.list.length*100,{round:0}),q.els.status.html(percent+"% "+_idx+"/"+q.config.list.length),q.els.bar.css({width:percent+"%"}),_idx>=q.config.list.length?q.config.onend&&q.config.onend.call({id:id}):status||q.hold||q.config.onprogress&&q.config.onprogress.call({id:id,list:q.config.list,item:q.config.list[idx],idx:idx})},this.progress=function(opts){if("undefined"==typeof opts.id)return void U.error("id가 필요합니다.");var id=opts.id,q=this.queue[id];q.hold=!1,"undefined"==typeof q.progress_index?(q.progress_index=0,this.set_progress(id,q.progress_index,!1)):(this.set_progress(id,q.progress_index,!0),setTimeout(function(){this.set_progress(id,q.progress_index+1,!1)}.bind(this),q.config.progress_time))},this.hold=function(id){if("undefined"==typeof opts.id)return void U.error("id가 필요합니다.");var id=opts.id,q=this.queue[id];q.hold=!0},this.clear=function(opts){if("undefined"==typeof opts.id)return void U.error("id가 필요합니다.");var id=opts.id,q=this.queue[id];return q?(q.hold=!1,q.status=status,q.progress_index=0,q.els.status.html("0% "),void q.els.bar.css({width:"0%"})):this},this.get_frame=function(theme){var po=[];return po.push('<div class="ax5-ui-progress '+(theme||"")+'" data-progress-els="root">'),po.push('<div class="progress-bar" data-progress-els="bar" style="width:0%;">'),po.push('<span class="progress-status" data-progress-els="status">0%</span>'),po.push("</div>"),po.push("</div>"),po.join("")},this.set_loaded_byte=function(opts){if("undefined"==typeof opts.id)return void U.error("id가 필요합니다.");var percent,id=opts.id,q=this.queue[id];percent=U.number(opts.byte/q.config.total_byte*100,{round:0}),q.els.status.html(percent+"% "+U.number(opts.byte,{"byte":!0})+"/"+U.number(q.config.total_byte,{"byte":!0})),q.els.bar.css({width:percent+"%"})}});U.is_function(ax_super)&&(ax_class.prototype=new ax_super),root.progress=ax_class,"function"==typeof define&&define.amd&&define("_ax5_ui_progress",[],function(){return ax_class})}(ax5.ui,ax5.ui.root);