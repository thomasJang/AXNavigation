!function(root,ax_super){var U=ax5.util,axd=ax5.dom,ax_class=function(){this.main=function(){ax_super&&ax_super.call(this),this.config={click_event_name:"click",theme:"default",width:300,axicon:'<i class="axi axi-axisj"></i>',msg:"",display_time:3e3,animate_time:200}}.apply(this,arguments),this.toast_container=null,this.queue=[];var cfg=this.config;this.init=function(){var container_id=ax5.get_guid();axd.append(document.body,'<div class="ax5-ui-toast-container" data-toast-container="'+container_id+'"></div>'),this.toast_container=ax5.dom('[data-toast-container="'+container_id+'"]')},this.push=function(opts,callback){return U.is_string(opts)&&(opts={title:cfg.title,msg:opts}),opts.toast_type="push",opts.theme=opts.theme||cfg.theme||"",this.open(opts,callback),this},this.confirm=function(opts,callback){return U.is_string(opts)&&(opts={title:cfg.title,msg:opts}),opts.toast_type="confirm",opts.theme=opts.theme||cfg.theme||"","undefined"==typeof opts.btns&&(opts.btns={ok:{label:"ok",theme:opts.theme}}),this.open(opts,callback),this},this.get_content=function(toast_id,opts){var po=[];return po.push('<div id="'+toast_id+'" data-ax5-ui="toast" class="ax5-ui-toast '+opts.theme+'">'),po.push('<div class="ax-toast-axicon">'),po.push(opts.axicon||cfg.axicon||""),po.push("</div>"),po.push('<div class="ax-toast-body">'),po.push((opts.msg||cfg.msg||"").replace(/\n/g,"<br/>")),po.push("</div>"),opts.btns&&(po.push('<div class="ax-toast-buttons">'),po.push('<div class="ax-button-wrap">'),U.each(opts.btns,function(k){po.push('<button type="button" data-ax-toast-btn="'+k+'" class="ax-btn '+this.theme+'">'+this.label+"</button>")}),po.push("</div>"),po.push("</div>")),po.push('<div style="clear:both;"></div>'),po.push("</div>"),po.join("")},this.open=function(opts,callback){var toast_box,box={};opts.id="ax5-toast-"+this.queue.length,this.queue.push(opts),box={width:opts.width||cfg.width},this.toast_container.prepend(this.get_content(opts.id,opts)),toast_box=ax5.dom("#"+opts.id),toast_box.css({width:box.width}),"push"===opts.toast_type?setTimeout(function(){this.close(opts,toast_box,callback)}.bind(this),cfg.display_time):"confirm"===opts.toast_type&&toast_box.find("[data-ax-toast-btn]").on(cfg.click_event_name,function(e){this.btn_onclick(e||window.event,opts,toast_box,callback)}.bind(this))},this.btn_onclick=function(e,opts,toast_box,callback,target,k){if(target=axd.parent(e.target,function(target){return ax5.dom.attr(target,"data-ax-toast-btn")?!0:void 0})){k=axd.attr(target,"data-ax-toast-btn");var that={key:k,value:opts.btns[k],toast_id:opts.id,btn_target:target};opts.btns[k].onclick?opts.btns[k].onclick.call(that,k):"confirm"===opts.toast_type&&(callback&&callback.call(that,k),this.close(opts,toast_box))}},this.onkeyup=function(e){e.keyCode==ax5.info.event_keys.ESC&&this.close()},this.close=function(opts,toast_box,callback){"undefined"==typeof toast_box&&(opts=U.last(this.queue),toast_box=ax5.dom("#"+opts.id));var that={toast_id:opts.id};return toast_box.class_name("add","push"==opts.toast_type?"removed":"destroy"),this.queue=U.filter(this.queue,function(){return opts.id!=this.id}),setTimeout(function(){toast_box.remove(),callback&&callback.call(that)},cfg.animate_time),this}};U.is_function(ax_super)&&(ax_class.prototype=new ax_super),root.toast=ax_class,"function"==typeof define&&define.amd&&define("_ax5_ui_toast",[],function(){return ax_class})}(ax5.ui,ax5.ui.root);